import{l as o}from"./index-DaD2QpQz.js";const n="http://127.0.0.1:8000/api",a=o.create({baseURL:n,timeout:1e4});a.interceptors.request.use(e=>{const t=localStorage.getItem("token")||localStorage.getItem("adminToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("adminToken"),localStorage.removeItem("username"),localStorage.removeItem("adminUsername"),localStorage.removeItem("userRole"),window.location.href="/login"),Promise.reject(e)});const i={async getArticles(e={}){const{data:t}=await a.get("/knowledge/articles",{params:e});return t},async getArticleDetail(e){const{data:t}=await a.get(`/knowledge/articles/${e}`);return t},async favoriteArticle(e){const{data:t}=await a.post(`/knowledge/articles/${e}/favorite`);return t},async unfavoriteArticle(e){const{data:t}=await a.delete(`/knowledge/articles/${e}/favorite`);return t},async getFavorites(e={}){const{data:t}=await a.get("/knowledge/favorites",{params:e});return t},async getReadHistory(e=30){const{data:t}=await a.get("/knowledge/read-history",{params:{limit:e}});return t},async getHomepageRecommendations(){const{data:e}=await a.get("/knowledge/recommendations/home");return e},async createArticle(e){const{data:t}=await a.post("/knowledge/admin/articles",e);return t},async updateArticle(e,t){const{data:r}=await a.put(`/knowledge/admin/articles/${e}`,t);return r},async deleteArticle(e){const{data:t}=await a.delete(`/knowledge/admin/articles/${e}`);return t}};export{i as k};
