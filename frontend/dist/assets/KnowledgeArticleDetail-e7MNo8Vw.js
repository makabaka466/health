import{_ as E,o as S,x as T,c as v,a as u,b as l,y as z,e as t,p as y,w as s,r,g as h,t as d,i,z as F,f as D,A as H,E as f,u as I,F as K}from"./index-CzA08Cdm.js";import{k as A}from"./knowledge-pwPuu1Ho.js";const R={class:"knowledge-detail-page"},j={class:"detail-header-card"},q={key:0,class:"header-main"},G={class:"category-chip"},J={class:"meta-row"},O=["innerHTML"],P={class:"actions-row"},Q={__name:"KnowledgeArticleDetail",setup(U){const m=H(),C=I(),_=h(!1),e=h(null),w=async()=>{var a,c;const o=Number(m.params.id);if(!o){e.value=null;return}_.value=!0;try{e.value=await A.getArticleDetail(o)}catch(n){e.value=null,f.error(((c=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:c.detail)||"加载文章详情失败")}finally{_.value=!1}},b=async()=>{var o,a;if(e.value)try{await A.favoriteArticle(e.value.id),e.value.favorite_count+=1,f.success("收藏成功")}catch(c){f.error(((a=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:a.detail)||"收藏失败")}},g=()=>{C.push("/dashboard/knowledge-center")},x=o=>o?new Date(o).toLocaleDateString("zh-CN"):"-";return S(w),T(()=>m.params.id,w),(o,a)=>{const c=r("ArrowLeft"),n=r("el-icon"),p=r("el-button"),N=r("Clock"),V=r("View"),k=r("Star"),B=r("el-empty"),L=r("el-card"),M=F("loading");return u(),v("div",R,[l("div",j,[t(p,{class:"back-btn",text:"",onClick:g},{default:s(()=>[t(n,null,{default:s(()=>[t(c)]),_:1}),a[0]||(a[0]=i(" 返回知识中心 ",-1))]),_:1}),e.value?(u(),v("div",q,[l("span",G,d(e.value.category),1),l("h1",null,d(e.value.title),1),l("div",J,[l("span",null,[t(n,null,{default:s(()=>[t(N)]),_:1}),i(d(x(e.value.created_at)),1)]),l("span",null,[t(n,null,{default:s(()=>[t(V)]),_:1}),i(d(e.value.view_count)+" 阅读",1)]),l("span",null,[t(n,null,{default:s(()=>[t(k)]),_:1}),i(d(e.value.favorite_count)+" 收藏",1)])])])):y("",!0)]),z((u(),D(L,{class:"detail-content-card",shadow:"never"},{default:s(()=>[e.value?(u(),v(K,{key:0},[l("div",{class:"article-content",innerHTML:e.value.content},null,8,O),l("div",P,[t(p,{type:"primary",onClick:b},{default:s(()=>[t(n,null,{default:s(()=>[t(k)]),_:1}),a[1]||(a[1]=i(" 收藏文章 ",-1))]),_:1}),t(p,{onClick:g},{default:s(()=>[...a[2]||(a[2]=[i("返回列表",-1)])]),_:1})])],64)):_.value?y("",!0):(u(),D(B,{key:1,description:"文章不存在或已删除"}))]),_:1})),[[M,_.value]])])}}},Y=E(Q,[["__scopeId","data-v-59901d4d"]]);export{Y as default};
