import{_ as ne,o as ae,c as u,a as r,b as e,e as o,w as a,r as c,q as le,g as _,E as h,u as ce,i as v,F as x,h as S,n as ie,f as R,k as de,t as d}from"./index-CzA08Cdm.js";import{k as A}from"./knowledge-pwPuu1Ho.js";const re={class:"knowledge-center-container"},ue={class:"page-header"},_e={class:"header-content"},ve={class:"header-icon"},pe={class:"header-actions"},me={class:"content-section"},ge={class:"category-sidebar"},he={class:"category-list"},fe=["onClick"],ye={class:"category-icon"},ke={class:"category-info"},Ce={class:"knowledge-content"},we={class:"content-header"},be={class:"breadcrumb"},ze={class:"view-options"},Fe={key:0,class:"loading-container"},Ve={key:1,class:"empty-container"},xe={key:2},Se={key:0,class:"knowledge-grid"},Re={class:"card-image"},Ae=["src","alt"],De={class:"card-content"},Ee={class:"card-category"},Ke={class:"card-title"},$e={class:"card-summary"},Ne={class:"card-meta"},Ue={class:"meta-item"},je={class:"meta-item"},Be={class:"meta-item"},Ie={key:1,class:"knowledge-list"},Le={class:"list-content"},Ge={class:"list-image"},Me=["src","alt"],He={class:"list-info"},Pe={class:"list-category"},Te={class:"list-title"},qe={class:"list-summary"},Qe={class:"list-meta"},Je={class:"meta-item"},Oe={class:"meta-item"},We={class:"meta-item"},Xe={class:"pagination-container"},Ye={__name:"KnowledgeCenter",setup(Ze){const G=ce(),b=_(""),m=_("all"),z=_("grid"),f=_(!1),p=_(1),y=_(12),C=_(0),g=_([]),w=_([{id:"all",name:"全部",count:0,icon:"Grid",color:"#409EFF"},{id:"慢性病管理",name:"慢性病管理",count:0,icon:"FirstAid",color:"#F56C6C"},{id:"饮食营养",name:"饮食营养",count:0,icon:"Food",color:"#67C23A"},{id:"心理健康",name:"心理健康",count:0,icon:"ChatDotRound",color:"#909399"},{id:"运动健身",name:"运动健身",count:0,icon:"TrendCharts",color:"#E6A23C"},{id:"老年健康",name:"老年健康",count:0,icon:"Clock",color:"#606266"},{id:"儿童健康",name:"儿童健康",count:0,icon:"User",color:"#409EFF"}]),M=()=>{const n=w.value.find(t=>t.id===m.value);return n?n.name:"全部"},H=()=>{const n={};for(const t of g.value)n[t.category]=(n[t.category]||0)+1;w.value=w.value.map(t=>t.id==="all"?{...t,count:C.value}:{...t,count:n[t.id]||0})},P=n=>{m.value=n,p.value=1,k()},T=()=>{p.value=1,k()},k=async()=>{var n,t;f.value=!0;try{const l=await A.getArticles({page:p.value,page_size:y.value,category:m.value==="all"?void 0:m.value,keyword:b.value||void 0,sort_by:"latest"});g.value=l.items||[],C.value=l.total||0,H()}catch(l){h.error(((t=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:t.detail)||"加载知识内容失败")}finally{f.value=!1}},D=n=>{G.push(`/dashboard/knowledge-center/article/${n.id}`)},q=async()=>{var n,t;f.value=!0;try{const l=await A.getFavorites({page:1,page_size:y.value});g.value=l.items||[],C.value=l.total||0,m.value="all",h.success("已切换到我的收藏")}catch(l){h.error(((t=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:t.detail)||"加载收藏失败")}finally{f.value=!1}},Q=async()=>{var n,t;try{const l=await A.getReadHistory(30);if(!l.length){h.info("暂无阅读记录");return}const i=l.slice(0,6).map(F=>`《${F.article_title}》`).join("、");h.info(`最近阅读：${i}`)}catch(l){h.error(((t=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:t.detail)||"加载阅读记录失败")}},J=n=>{y.value=n,p.value=1,k()},O=n=>{p.value=n,k()},E=n=>n?new Date(n).toLocaleDateString("zh-CN"):"-";return ae(()=>{k()}),(n,t)=>{const l=c("Reading"),i=c("el-icon"),F=c("Search"),W=c("el-input"),V=c("el-button"),K=c("el-col"),$=c("ArrowRight"),X=c("Grid"),N=c("el-radio-button"),Y=c("List"),Z=c("el-radio-group"),ee=c("el-skeleton"),te=c("el-empty"),U=c("View"),j=c("Star"),B=c("Clock"),I=c("el-card"),oe=c("el-pagination"),se=c("el-row");return r(),u("div",re,[e("div",ue,[e("div",_e,[e("div",ve,[o(i,{size:"32",color:"#409EFF"},{default:a(()=>[o(l)]),_:1})]),t[4]||(t[4]=e("div",{class:"header-text"},[e("h1",null,"健康知识中心"),e("p",null,"获取专业的健康知识和养生指导")],-1))]),e("div",pe,[o(W,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),placeholder:"搜索健康知识...",class:"search-input",onKeyup:le(T,["enter"])},{prefix:a(()=>[o(i,null,{default:a(()=>[o(F)]),_:1})]),_:1},8,["modelValue"]),o(V,{class:"header-btn",onClick:q},{default:a(()=>[...t[5]||(t[5]=[v("我的收藏",-1)])]),_:1}),o(V,{class:"header-btn",onClick:Q},{default:a(()=>[...t[6]||(t[6]=[v("阅读记录",-1)])]),_:1})])]),e("div",me,[o(se,{gutter:24},{default:a(()=>[o(K,{xs:24,sm:8,md:6,lg:5},{default:a(()=>[e("div",ge,[t[7]||(t[7]=e("div",{class:"sidebar-header"},[e("h3",null,"知识分类")],-1)),e("div",he,[(r(!0),u(x,null,S(w.value,s=>(r(),u("div",{key:s.id,class:ie(["category-item",{active:m.value===s.id}]),onClick:L=>P(s.id)},[e("div",ye,[o(i,{size:"20",color:s.color},{default:a(()=>[(r(),R(de(s.icon)))]),_:2},1032,["color"])]),e("div",ke,[e("h4",null,d(s.name),1),e("p",null,d(s.count)+" 篇文章",1)])],10,fe))),128))])])]),_:1}),o(K,{xs:24,sm:16,md:18,lg:19},{default:a(()=>[e("div",Ce,[e("div",we,[e("div",be,[t[8]||(t[8]=e("span",null,"首页",-1)),o(i,null,{default:a(()=>[o($)]),_:1}),t[9]||(t[9]=e("span",null,"知识中心",-1)),o(i,null,{default:a(()=>[o($)]),_:1}),e("span",null,d(M()),1)]),e("div",ze,[o(Z,{modelValue:z.value,"onUpdate:modelValue":t[1]||(t[1]=s=>z.value=s),size:"small"},{default:a(()=>[o(N,{label:"grid"},{default:a(()=>[o(i,null,{default:a(()=>[o(X)]),_:1})]),_:1}),o(N,{label:"list"},{default:a(()=>[o(i,null,{default:a(()=>[o(Y)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),f.value?(r(),u("div",Fe,[o(ee,{rows:3,animated:""})])):g.value.length===0?(r(),u("div",Ve,[o(te,{description:"暂无相关知识内容"},{default:a(()=>[o(V,{type:"primary"},{default:a(()=>[...t[10]||(t[10]=[v("推荐内容",-1)])]),_:1})]),_:1})])):(r(),u("div",xe,[z.value==="grid"?(r(),u("div",Se,[(r(!0),u(x,null,S(g.value,s=>(r(),R(I,{key:s.id,class:"knowledge-card",shadow:"hover",onClick:L=>D(s)},{default:a(()=>[e("div",Re,[e("img",{src:s.cover_image||"/default-health.jpg",alt:s.title},null,8,Ae)]),e("div",De,[e("div",Ee,d(s.category),1),e("h3",Ke,d(s.title),1),e("p",$e,d(s.summary),1),e("div",Ne,[e("span",Ue,[o(i,null,{default:a(()=>[o(U)]),_:1}),v(" "+d(s.view_count),1)]),e("span",je,[o(i,null,{default:a(()=>[o(j)]),_:1}),v(" "+d(s.favorite_count),1)]),e("span",Be,[o(i,null,{default:a(()=>[o(B)]),_:1}),v(" "+d(E(s.created_at)),1)])])])]),_:2},1032,["onClick"]))),128))])):(r(),u("div",Ie,[(r(!0),u(x,null,S(g.value,s=>(r(),R(I,{key:s.id,class:"knowledge-list-item",shadow:"hover",onClick:L=>D(s)},{default:a(()=>[e("div",Le,[e("div",Ge,[e("img",{src:s.cover_image||"/default-health.jpg",alt:s.title},null,8,Me)]),e("div",He,[e("div",Pe,d(s.category),1),e("h3",Te,d(s.title),1),e("p",qe,d(s.summary),1),e("div",Qe,[e("span",Je,[o(i,null,{default:a(()=>[o(U)]),_:1}),v(" "+d(s.view_count),1)]),e("span",Oe,[o(i,null,{default:a(()=>[o(j)]),_:1}),v(" "+d(s.favorite_count),1)]),e("span",We,[o(i,null,{default:a(()=>[o(B)]),_:1}),v(" "+d(E(s.created_at)),1)])])])])]),_:2},1032,["onClick"]))),128))])),e("div",Xe,[o(oe,{"current-page":p.value,"onUpdate:currentPage":t[2]||(t[2]=s=>p.value=s),"page-size":y.value,"onUpdate:pageSize":t[3]||(t[3]=s=>y.value=s),"page-sizes":[12,24,48],total:C.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:J,onCurrentChange:O},null,8,["current-page","page-size","total"])])]))])]),_:1})]),_:1})])])}}},ot=ne(Ye,[["__scopeId","data-v-0688ae9c"]]);export{ot as default};
